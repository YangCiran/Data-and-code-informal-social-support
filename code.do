
gen Nb4_10 = 0 if b4_10 == 1
replace Nb4_10 = 0.5 if b4_10 == 2
replace Nb4_10 = 1 if b4_10 == 3

gen Nb4_11 = 0 if b4_11 == 1
replace Nb4_11 = 0.5 if b4_11 == 2
replace Nb4_11 = 1 if b4_11 == 3

gen Nb6_1 = 0 if b6_1 == 1
replace Nb6_1 = 0.5 if b6_1 == 2
replace Nb6_1 = 1 if b6_1 == 3

gen Nb6_2 = 0 if b6_2 == 1
replace Nb6_2 = 0.5 if b6_2 == 2
replace Nb6_2 = 1 if b6_2 == 3

gen Nb4_2 = 0 if b4_2 == 1
replace Nb4_2 = 0.5 if b4_2 == 2
replace Nb4_2 = 1 if b4_2 == 3

gen Nb4_4 = 0 if b4_4 == 1
replace Nb4_4 = 0.5 if b4_4 == 2
replace Nb4_4 = 1 if b4_4 == 3

gen Nb4_5 = 0 if b4_5 == 1
replace Nb4_5 = 0.5 if b4_5 == 2
replace Nb4_5 = 1 if b4_5 == 3

gen Nb4_9 = 0 if b4_9 == 1
replace Nb4_9 = 0.5 if b4_9 == 2
replace Nb4_9 = 1 if b4_9 == 3

gen Nb6_7 = 0 if b6_7 == 1
replace Nb6_7 = 1 if b6_7 == 2

gen Nb6_9 = 0 if b6_9 == 1
replace Nb6_9 = 0.5 if b6_9 == 2
replace Nb6_9 = 1 if b6_9 == 3

gen Nb6_3 = 0 if b6_3 == 1
replace Nb6_3 = 0.5 if b6_3 == 2
replace Nb6_3 = 1 if b6_3 == 3

gen Nb6_4 = 0 if b6_4 == 1
replace Nb6_4 = 0.5 if b6_4 == 2
replace Nb6_4 = 1 if b6_4 == 3

gen Nb6_5 = 0 if b6_5 == 1
replace Nb6_5 = 0.5 if b6_5 == 2
replace Nb6_5 = 1 if b6_5 == 3

gen Nb6_6 = 0 if b6_6 == 1
replace Nb6_6 = 1 if b6_6 == 2

gen Nb9_1__1 = 1 if b9_1__1 == 1
replace Nb9_1__1 = 0 if b9_1__1 == 2

gen Nb9_1__2 = 1 if b9_1__2 == 1
replace Nb9_1__2 = 0 if b9_1__2 == 2

gen Nb9_1__3 = 1 if b9_1__3 == 1
replace Nb9_1__3 = 0 if b9_1__3 == 2

gen Nb9_1__4 = 1 if b9_1__4 == 1
replace Nb9_1__4 = 0 if b9_1__4 == 2

gen Nb9_1__5 = 1 if b9_1__5 == 1
replace Nb9_1__5 = 0 if b9_1__5 == 2

gen Nb9_1__6 = 1 if b9_1__6 == 1
replace Nb9_1__6 = 0 if b9_1__6 == 2

gen Nb9_1__7 = 1 if b9_1__7 == 1
replace Nb9_1__7 = 0 if b9_1__7 == 2

gen Nb9_1__8 = 1 if b9_1__8 == 1
replace Nb9_1__8 = 0 if b9_1__8 == 2

gen Nb9_1__9 = 1 if b9_1__9 == 1
replace Nb9_1__9 = 0 if b9_1__9 == 2

gen Nb9_1__10 = 1 if b9_1__10 == 1
replace Nb9_1__10 = 0 if b9_1__10 == 2

gen Nb9_1__11 = 1 if b9_1__11 == 1
replace Nb9_1__11 = 0 if b9_1__11 == 2

gen Nb9_1__13 = 1 if b9_1__13 == 1
replace Nb9_1__13 = 0 if b9_1__13 == 2

gen Nb9_1__14 = 1 if b9_1__14 == 1
replace Nb9_1__14 = 0 if b9_1__14 == 2

gen Nb9_1__15 = 1 if b9_1__15 == 1
replace Nb9_1__15 = 0 if b9_1__15 == 2

gen Nb9_1__16 = 1 if b9_1__16 == 1
replace Nb9_1__16 = 0 if b9_1__16 == 2

gen Nb9_1__17 = 1 if b9_1__17 == 1
replace Nb9_1__17 = 0 if b9_1__17 == 2

gen Nb9_1__18 = 1 if b9_1__18 == 1
replace Nb9_1__18 = 0 if b9_1__18 == 2

gen Nb9_1__19 = 1 if b9_1__19 == 1
replace Nb9_1__19 = 0 if b9_1__19 == 2

gen Nb9_1__20 = 1 if b9_1__20 == 1
replace Nb9_1__20 = 0 if b9_1__20 == 2

gen Nb9_1__22 = 1 if b9_1__22 == 1
replace Nb9_1__22 = 0 if b9_1__22 == 2

drop b4_10 b4_11 b6_1 b6_2 b4_2 b4_4 b4_5 b4_9 b6_7 b6_9 b6_3 b6_4 b6_5 b6_6 b9_1__1 b9_1__2 b9_1__3 b9_1__4 b9_1__5 b9_1__6 b9_1__7 b9_1__8 b9_1__9 b9_1__10 b9_1__11 b9_1__13 b9_1__14 b9_1__15 b9_1__16 b9_1__17 b9_1__18 b9_1__19 b9_1__20 b9_1__22 

label variable Nb4_10 "床椅间换位"
label variable Nb4_11 "室内走动"
label variable Nb6_1 "上下楼梯"
label variable Nb6_2 "曾经跌倒"
label variable Nb4_2 "自我梳理"
label variable Nb4_4 "独立洗浴"
label variable Nb4_5 "独立进食"
label variable Nb4_9 "独立如厕"
label variable Nb6_7 "提起重物"
label variable Nb6_9 "从事家务"
label variable Nb6_3 "在外行走"
label variable Nb6_4 "乘坐公交"
label variable Nb6_5 "外出购物"
label variable Nb6_6 "自理经济"
label variable Nb9_1__1 "高血压慢性疾病"
label variable Nb9_1__2 "心脏病慢性疾病"
label variable Nb9_1__3 "高血糖慢性疾病"
label variable Nb9_1__4 "脑血管慢性疾病"
label variable Nb9_1__5 "肾脏方面慢性病"
label variable Nb9_1__6 "肝脏方面慢性病"
label variable Nb9_1__7 "结核病慢性疾病"
label variable Nb9_1__8 "颈腰椎慢性疾病"
label variable Nb9_1__9 "风湿病慢性疾病"
label variable Nb9_1__10 "乳腺疾病慢性病"
label variable Nb9_1__11 "生殖系统慢性病"
label variable Nb9_1__13 "泌尿系统慢性病"
label variable Nb9_1__14 "眼部慢性疾病"
label variable Nb9_1__15 "肿瘤慢性疾病"
label variable Nb9_1__16 "老年痴呆症疾病"
label variable Nb9_1__17 "骨质疏松慢性病"
label variable Nb9_1__18 "呼吸系统慢性病"
label variable Nb9_1__19 "神经系统慢性病"
label variable Nb9_1__20 "消化系统慢性病"
label variable Nb9_1__22 "耳聋慢性疾病"


*************************************************************************
*--------------------QWB指数计算-----------------------*


gen qwb8 = 1-(0.551073411818617*Nb4_10 + 0.214068008983065*Nb4_11 + 0.0950614624172907*Nb6_1 + 0.0373598109017461*Nb6_2 + 0.477370488962576*Nb4_2 + 0.180809994660029*Nb4_4 + 0.814411761643984*Nb4_5 + 0.319102637049415*Nb4_9 + 0.115524825221398*Nb6_7 + 0.0301497822406082*Nb6_9 + 0.0774309894383859*Nb6_3 + 0.0462559333953698*Nb6_4 + 0.0174027749944073*Nb6_5 + 0.0239781182731072*Nb6_6 + 0.169862725461858*Nb9_1__1 + 0.23566198708678*Nb9_1__2 + 0.12380740085991*Nb9_1__3 + 0.27202459669861*Nb9_1__4 + 0.0871937761619523*Nb9_1__5 + 0.0584127925644564*Nb9_1__6 + 0.0584127925644564*Nb9_1__7 + 0.0180469995740013*Nb9_1__8 + 0.0180469995740013*Nb9_1__9 + 0.0112212022396844*Nb9_1__10 + 0.0112212022396844*Nb9_1__11 + 0.0144766407365504*Nb9_1__13 + 0.00986997203409821*Nb9_1__14 + 0.441231302171384*Nb9_1__15 + 0.312527773973342*Nb9_1__16 + 0.0180469995740013*Nb9_1__17 + 0.0497230523747711*Nb9_1__18 + 0.0497230523747711*Nb9_1__19 + 0.0306187597015892*Nb9_1__20 + 0.00986997203409821*Nb9_1__22)

sum qwb8
sum qwb8  if qwb8 < 0
norm qwb8 , method(mmx)


sum qwb8 if age >= 60 & age <70
sum qwb8 if age >= 70 & age <80
sum qwb8 if age >= 80 & age <90
sum qwb8 if age >= 90 & age <100

*--------------------其他变量选择与处理-----------------------*
gen age = 2018 - a2__1__open

rename f5_1__1__open zinvshu
rename  a8__1__open jiatingguimo

label list   a10 b10_1 b24__4 c14 d2_1__1 d2_1__2 d2_1__3

label list a1
tab a1
recode a1 (1 = 1 "男")(2 = 0 "女"), gen(gender)
label list gender
tab gender

label list a3
tab a3
recode a3 (1 2= 1 "文盲/半文盲")(3 = 2 "小学")(4 = 3 "初中")(5 = 4 "高中/中专")(6 = 5 "大专")(7 = 6 "本科及以上"), gen(edu)
label list edu
tab edu

label list a5
tab a5
recode a5 (1= 1 "在婚（有配偶）")(2 3 4 = 0 "不在婚（无配偶）"), gen(spouse)
label list spouse
tab spouse

label list a10
tab a10
recode a10 (1 3= 0 "农业户口")(2 4 = 1 "非农业户口"), gen(hukou)
label list hukou
tab hukou

label list b10_1
tab b10_1
recode b10_1 (1= 1 "吸烟")(2  = 0 "不吸烟"), gen(smoking)
label list smoking
tab smoking

label list b24__4
tab b24__4
recode b24__4 (1= 5 "非常满意")(2  = 4 "比较满意")(3  = 3 "一般")(4  = 2 "比较不满意")(5  = 1 "非常不满意"), gen(weisheng)
label list weisheng
tab weisheng

b24__5
label list b24__5
tab b24__5
recode b24__5 (1= 5 "非常满意")(2  = 4 "比较满意")(3  = 3 "一般")(4  = 2 "比较不满意")(5  = 1 "非常不满意"), gen(jinglao)
label list jinglao
tab jinglao

gen income1 = income
replace income1 = . if income ==9999996|income ==9999998|income ==9999999
gen lnincome1= log(income1+1)

gen fincome = c12_2__1__open
replace fincome = . if fincome ==999996|fincome ==999998|fincome ==999999
gen lnfincome= log(fincome+1)

gen yule = c13_2__5
replace yule = . if yule ==999996|yule ==999998|yule ==999999
gen lnyule= log(yule+1)

label list c14
tab c14
recode c14 (1= 1 "本村/居委会")(2  = 2 "本乡镇街道其它村/居委会")(3  = 3 "本区县其它乡镇/街道")(4  = 4 "本市其它区县")(5  = 5 "本省其它市")(6  = 6 "本省其它市")(7  = 7 "本省其它市"), gen(suozaidi)
label list suozaidi
tab suozaidi

 
label list e2__8
tab e2__8
recode e2__8 (1= 3 "充实")(2  = 2 "一般")(3  = 1 "无趣")(9  = . ), gen(huodong)
label list huodong
tab huodong


label list b1
tab b1
drop if b1 ==9
recode b1 (1= 5 "很健康")(2  = 4 "比较健康")(3  = 3 "一般")(4  = 2 "比较不健康")(5  = 1 "很不健康"), gen(ziping)
label list ziping
tab ziping
rename ziping zhuguan1

label list b2
tab b2
drop if b2 ==9
gen zhuguan = 0 if b2 == 1
replace zhuguan = 0.25 if b2 == 2
replace zhuguan = 0.5 if b2 == 3
replace zhuguan = 0.75 if b2 == 4
replace zhuguan = 1 if b2 == 5
tab zhuguan
rename zhuguan ziping1

label list  d2_1__1 d2_1__2 d2_1__3
tab d2_1__1
tab d2_1__2
tab d2_1__3
recode d2_1__1 (1= 1 "参加企业职工养老保险")(2  = 0 "未参加企业职工养老保险"), gen(qiye)
label list qiye
tab qiye
recode d2_1__2 (1= 1 "参加机关事业单位养老保险")(2  = 0 "未参加机关事业单位养老保险"), gen(jiguan)
label list jiguan
tab jiguan
recode d2_1__3 (1= 1 "参加城乡居民养老保险")(2  = 0 "未参加城乡居民养老保险"), gen(chegnxiang)
label list chegnxiang
tab chegnxiang

gen yanglao = 0
for var qiye jiguan chegnxiang: replace yanglao = 1 if X  == 1
label variable yanglao "是否参加养老保险"
tab yanglao

rename  ggziping ggzhuagun


drop  a1 a3 a5 a10 b10_1 b24__4 income1 income fincome c12_2__1__open c14 e2__8  d2_1__1 d2_1__2 d2_1__3

order qwb8  ziping1   zhuguan1  d15__4 d15__5 d15__6 gender age edu spouse hukou smoking yanglao  lnincome1 huodong  zinvshu jiatingguimo  lnfincome  weisheng suozaidi


*生成省份虚拟变量
tab q3__1, gen(dqy)
*生成收入来源虚拟变量
tab c11__1, gen(dshouru)
*生成居住地区类型虚拟变量
tab q5a, gen(djuzhu)
*生成社区类型虚拟变量
tab q5b, gen(dshequ)

tab q5a
tab q5b

label list q5a q5b

drop if q5a ==6|q5b == 8


*计算省份的变量均值
egen msoc1 = mean( d15__4 ),by(q3__1)
egen msoc2 = mean( d15__5 ),by(q3__1)
egen msoc3 = mean( d15__6 ),by(q3__1)

bysort q3__1:egen msoc5=mean(d15__6)

gen shehui = 0.5*d15__6+ 0.3*d15__5+0.2*d15__4

egen msoc4 = mean( shehui ),by(q3__1)

*--------------------正式建模-----------------------*
*****************************************************
*第一部分：描述性统计
*删除异常值
drop if age <60

tabstat qwb8 zhuguan1 shehui d15__4 d15__5 d15__6 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   if lnincome1 != . & huodong != . &  zinvshu != . &   lnfincome != ., s(n mean sd p25 med p75 min max) c(s) f(%10.4f)

gen psm = 1 if d15__4 >= 2.35595
replace psm = 0 if d15__4 < 2.35595
ssc install psmatch2

sum shehui

gen psm2 = 1 if shehui >= 2.078854
replace psm2 = 0 if shehui < 2.078854

sum ggqwb8,detail

*--------------------基准回归-----------------------*
*****************************************************
reg qwb8 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu  lnfincome   ,r
estat vif

tobit qwb8 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu  lnfincome   ,ul(1) vce(robust)
est store ols1

tobit qwb8 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,ul(1) vce(robust)
est store ols2

tobit qwb8 d15__4 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu  lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,ul(1) vce(robust)
est store ols3

tobit qwb8 d15__5 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu  lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,ul(1) vce(robust)
est store ols4

tobit qwb8 d15__6 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu  lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,ul(1) vce(robust)
est store ols5

tobit qwb8 d15__4 d15__5 d15__6 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,ul(1) vce(cluster q1__1__open)
est store ols6

esttab ols1 ols2 ols3 ols4 ols5 ols6 using tab1.rtf ,b(%10.4f) ar2(%10.4f) se(%10.4f)  mtitle(ols1 ols2 ols3 ols4 ols5 ols6) star (* 0.1 ** 0.05 *** 0.01) replace

*--------------------稳健性检验----------------------*
******************************************************
 
tabstat qwb8, s(mean sd p25 med p75 min max) c(s) f(%10.4f)
*drop dengji
gen dengji = 1 if qwb8 >= 0 & qwb8 <= 0.7063
replace dengji = 2 if qwb8 >  0.7063 & qwb8 <=0.8398
replace dengji = 3 if qwb8 > 0.8398 & qwb8 <=0.9901
replace dengji = 4 if qwb8 > 0.9901

sum dengji


clad qwb8 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu lnfincome  ,reps(100) ul(1) 
est store clad1

clad qwb8 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu lnfincome   dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,reps(100) ul(1) 
est store clad2

esttab  clad1 clad2 using tab3.rtf ,b(%10.4f) ar2(%10.4f) se(%10.4f)  mtitle( clad1 clad2 ) star (* 0.1 ** 0.05 *** 0.01) replace


*help reg


ologit dengji shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,vce(cluster q1__1__open)
est store w1

oprobit dengji shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,vce(cluster q1__1__open)
est store w2

ologit zhuguan1 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,vce(cluster q1__1__open)
est store w3

oprobit zhuguan1 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,vce(cluster q1__1__open)
est store w4


esttab  w1 w2 w3 w4  using tab2.rtf ,b(%10.4f) ar2(%10.4f) se(%10.4f)  mtitle(  w1 w2 w3 w4 ) star (* 0.1 ** 0.05 *** 0.01) replace

*--------------------内生性问题处理----------------------*
**********************************************************
sum shehui
gen shehuipsm = 1 if shehui >= 2.078854
replace shehuipsm = 0 if shehui < 2.078854

psmatch2  shehuipsm gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   ,outcome(qwb8) cal(0.01) n(4) ate ties logit common 
pstest gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   ,both graph

gen shehuipsm1 = 1 if shehui >= 2.0914
replace shehuipsm1 = 0 if shehui < 2.0914

**近邻匹配
psmatch2  shehuipsm1 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome    ,outcome(qwb8)  n(4) ate ties logit common

psmatch2  shehuipsm1 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome    dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,outcome(qwb8)  n(4) ate ties logit common


**卡尺匹配
psmatch2  shehuipsm1 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome    ,outcome(qwb8)  radius cal(0.01) ate ties logit common 

psmatch2  shehuipsm1 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome    dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,outcome(qwb8)  radius cal(0.01) ate ties logit common 

**核匹配
psmatch2  shehuipsm1 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   ,outcome(qwb8)  kernel ate ties logit common 

psmatch2  shehuipsm1 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,outcome(qwb8)  kernel ate ties logit common 


**局部线性回归匹配
psmatch2  shehuipsm1 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome    ,outcome(qwb8) llr ate ties logit common 

psmatch2  shehuipsm1 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7,outcome(qwb8) llr ate ties logit common 

*--------------------异质性分析----------------------*
******************************************************

help reg

tobit qwb8 shehui  age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if gender == 0,ul(1) vce(cluster q1__1__open)
est store ols1

tobit qwb8 shehui  age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if gender == 1,ul(1) vce(cluster q1__1__open)
est store ols2

tobit qwb8 shehui gender age edu spouse  yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if hukou == 0,ul(1) vce(cluster q1__1__open)
est store ols3

tobit qwb8 shehui gender age edu spouse  yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if hukou == 1,ul(1) vce(cluster q1__1__open)
est store ols4

*sum lnincome1
*gen shouru = 0 if lnincome1 <= 8.227077
*replace shouru = 1 if lnincome1 > 8.227077


*gen shouru1 = 0 if lnincome1 <= 8.2004
*replace shouru1 = 1 if lnincome1 > 8.2004

tobit qwb8 shehui gender age edu spouse hukou yanglao   huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if shouru1 == 0,ul(1) vce(cluster q1__1__open)
est store ols5

tobit qwb8 shehui gender age edu spouse hukou yanglao   huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if shouru1 == 1,ul(1) vce(cluster q1__1__open)
est store ols6

tobit qwb8 shehui gender age edu spouse hukou yanglao lnincome1  huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if age >=60 & age <80 ,ul(1) vce(cluster q1__1__open)
est store ols7

tobit qwb8 shehui gender age edu spouse hukou yanglao lnincome1  huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if age >= 80 ,ul(1) vce(cluster q1__1__open)
est store ols8


esttab ols1 ols2 ols3 ols4 ols5 ols6 ols7 ols8  using tab4.rtf ,b(%10.4f) ar2(%10.4f) se(%10.4f)  mtitle(  ols1 ols2 ols3 ols4 ols5 ols6 ols7 ols8 ) star (* 0.1 ** 0.05 *** 0.01) replace

*--------------------机制分析----------------------*
****************************************************
ologit e2__10 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if e2__1 != 9,vce(cluster q1__1__open)
est store o1

ologit e2__10 d15__4 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if e2__1 != 9,vce(cluster q1__1__open)
est store o2

ologit e2__10 d15__5 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if e2__1 != 9,vce(cluster q1__1__open)
est store o3

ologit e2__10 d15__6 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if e2__1 != 9,vce(cluster q1__1__open)
est store o4

ologit e2__1 shehui gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if e2__1 != 9,vce(cluster q1__1__open)
est store o5

ologit e2__1 d15__4 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if e2__1 != 9,vce(cluster q1__1__open)
est store o6

ologit e2__1 d15__5 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if e2__1 != 9,vce(cluster q1__1__open)
est store o7

ologit e2__1 d15__6 gender age edu spouse hukou yanglao  lnincome1 huodong  zinvshu   lnfincome   dqy2 dqy3 dqy4 dqy5 dqy6 dqy7 dqy8 dqy9 dqy10 dqy11 dqy12 dqy13 dqy14 dqy15 dqy16 dqy17 dqy18 dqy19 dqy20 dqy21 dqy22 dqy23 dqy24 dqy25 dqy26 dqy27 dqy28  dshouru2 dshouru3 dshouru4 dshouru5 dshouru6 dshouru7 dshouru8 djuzhu2 djuzhu3 djuzhu4 djuzhu5  dshequ2 dshequ3 dshequ4 dshequ5 dshequ6 dshequ7  if e2__1 != 9,vce(cluster q1__1__open)
est store o8


esttab o1 o2 o3 o4 o5 o6 o7 o8 using tab6.rtf ,b(%10.4f) ar2(%10.4f) se(%10.4f)  mtitle(o1 o2 o3 o4 o5 o6 o7 o8) star (* 0.1 ** 0.05 *** 0.01) replace



*添加省级变量
encode q3__1, gen(idcode)

gen wuran = 0.03168622 if idcode == 4
replace wuran = 0.0423665344715118 if idcode == 7
replace wuran = 0.526177704334259 if idcode == 16
replace wuran = 0.495136499404907 if idcode == 11
replace wuran = 0.530213952064514 if idcode == 3
replace wuran = 0.490310549736023 if idcode == 24
replace wuran = 0.159494444727898 if idcode == 5
replace wuran = 0.290086627006531 if idcode == 28
replace wuran = 0.0751435160636902 if idcode == 1
replace wuran = 0.608259081840515 if idcode == 14
replace wuran = 0.308067411184311 if idcode == 18
replace wuran = 0.399431198835373 if idcode == 9
replace wuran = 0.305080085992813 if idcode == 22
replace wuran = 0.387107133865356 if idcode == 15
replace wuran = 0.588947772979736 if idcode == 10
replace wuran = 0.383127450942993 if idcode == 17
replace wuran = 0.325053185224533 if idcode == 19
replace wuran = 0.404658317565918 if idcode == 20
replace wuran = 0.668947041034698 if idcode == 12
replace wuran = 0.311573386192322 if idcode == 13
replace wuran = 0.136110723018646 if idcode == 25
replace wuran = 0.429589122533798 if idcode == 6
replace wuran = 0.321698576211929 if idcode == 23
replace wuran = 0.364228129386902 if idcode == 2
replace wuran = 0.252743005752563 if idcode == 26
replace wuran = 0.197999760508537 if idcode == 21
replace wuran = 0.0973114520311356 if idcode == 27
replace wuran = 0.141663998365402 if idcode == 8


gen weishengzong = 7.55 if idcode == 4
replace weishengzong = 6.65 if idcode == 7
replace weishengzong = 8.28 if idcode == 16
replace weishengzong = 7.65 if idcode == 11
replace weishengzong = 6.71 if idcode == 3
replace weishengzong = 7.35 if idcode == 24
replace weishengzong = 9.79 if idcode == 5
replace weishengzong = 10.95 if idcode == 28
replace weishengzong = 6.39 if idcode == 1
replace weishengzong = 4.33 if idcode == 14
replace weishengzong = 5.37 if idcode == 18
replace weishengzong = 5.87 if idcode == 9
replace weishengzong = 4.02 if idcode == 22
replace weishengzong = 6.49 if idcode == 15
replace weishengzong = 6.21 if idcode == 10
replace weishengzong = 6.21 if idcode == 17
replace weishengzong = 5.56 if idcode == 19
replace weishengzong = 6.84 if idcode == 20
replace weishengzong = 5.2 if idcode == 12
replace weishengzong = 8.23 if idcode == 13
replace weishengzong = 6.37 if idcode == 25
replace weishengzong = 7.58 if idcode == 6
replace weishengzong = 7.86 if idcode == 23
replace weishengzong = 7.92 if idcode == 2
replace weishengzong = 7.28 if idcode == 26
replace weishengzong = 10.75 if idcode == 21
replace weishengzong = 11.21 if idcode == 27
replace weishengzong = 9.79 if idcode == 8

gen renjunweisheng = 11609.06 if idcode == 4
replace renjunweisheng = 5698.41 if idcode == 7
replace renjunweisheng = 3561.06 if idcode == 16
replace renjunweisheng = 3282 if idcode == 11
replace renjunweisheng = 4272.88 if idcode == 3
replace renjunweisheng = 3966.09 if idcode == 24
replace renjunweisheng = 4072.93 if idcode == 5
replace renjunweisheng = 3728.4 if idcode == 28
replace renjunweisheng = 9495.89 if idcode == 1
replace renjunweisheng = 5012.01 if idcode == 14
replace renjunweisheng = 5433.29 if idcode == 18
replace renjunweisheng = 3159.72 if idcode == 9
replace renjunweisheng = 3941.89 if idcode == 22
replace renjunweisheng = 3170.63 if idcode == 15
replace renjunweisheng = 4121.35 if idcode == 10
replace renjunweisheng = 3227.66 if idcode == 17
replace renjunweisheng = 3951.21 if idcode == 19
replace renjunweisheng = 3601.22 if idcode == 20
replace renjunweisheng = 4581.96 if idcode == 12
replace renjunweisheng = 3278.54 if idcode == 13
replace renjunweisheng = 4430.65 if idcode == 25
replace renjunweisheng = 3900.12 if idcode == 6
replace renjunweisheng = 3352.12 if idcode == 23
replace renjunweisheng = 3425.52 if idcode == 2
replace renjunweisheng = 4508.42 if idcode == 26
replace renjunweisheng = 3303.72 if idcode == 21
replace renjunweisheng = 5107.2 if idcode == 27
replace renjunweisheng = 4992.64 if idcode == 8


gen popdensity = 1304.7619047619 if idcode == 4
replace popdensity = 1223.89380530973 if idcode == 7
replace popdensity = 395.631326584976 if idcode == 16
replace popdensity = 224.056301983365 if idcode == 11
replace popdensity = 20.4733727810651 if idcode == 3
replace popdensity = 294.105551747772 if idcode == 24
replace popdensity = 132.550693703308 if idcode == 5
replace popdensity = 73.1530343007916 if idcode == 28
replace popdensity = 3928.57142857143 if idcode == 1
replace popdensity = 823.196881091618 if idcode == 14
replace popdensity = 615 if idcode == 18
replace popdensity = 434.931997136722 if idcode == 9
replace popdensity = 338.33470733718 if idcode == 22
replace popdensity = 270.239520958084 if idcode == 15
replace popdensity = 655.20156046814 if idcode == 10
replace popdensity = 590.658682634731 if idcode == 17
replace popdensity = 318.289402904787 if idcode == 19
replace popdensity = 313.267233238905 if idcode == 20
replace popdensity = 686 if idcode == 12
replace popdensity = 209.618644067797 if idcode == 13
replace popdensity = 384.325637910085 if idcode == 25
replace popdensity = 172.850020772746 if idcode == 6
replace popdensity = 217.159090909091 if idcode == 23
replace popdensity = 122.697625880511 if idcode == 2
replace popdensity = 191.196498054475 if idcode == 26
replace popdensity = 55.3477112676056 if idcode == 21
replace popdensity = 8.12681711200332 if idcode == 27
replace popdensity = 106.927710843373 if idcode == 8

gen renyuan = 326102 if idcode == 4
replace renyuan = 132525 if idcode == 7
replace renyuan = 623974 if idcode == 16
replace renyuan = 330891 if idcode == 11
replace renyuan = 241424 if idcode == 3
replace renyuan = 391919 if idcode == 24
replace renyuan = 241961 if idcode == 5
replace renyuan = 299636 if idcode == 28
replace renyuan = 238225 if idcode == 1
replace renyuan = 739314 if idcode == 14
replace renyuan = 589357 if idcode == 18
replace renyuan = 426956 if idcode == 9
replace renyuan = 318503 if idcode == 22
replace renyuan = 325847 if idcode == 15
replace renyuan = 961360 if idcode == 10
replace renyuan = 863167 if idcode == 17
replace renyuan = 521930 if idcode == 19
replace renyuan = 557808 if idcode == 20
replace renyuan = 918396 if idcode == 12
replace renyuan = 420360 if idcode == 13
replace renyuan = 272794 if idcode == 25
replace renyuan = 746322 if idcode == 6
replace renyuan = 323381 if idcode == 23
replace renyuan = 389770 if idcode == 2
replace renyuan = 410896 if idcode == 26
replace renyuan = 207045 if idcode == 21
replace renyuan = 59369 if idcode == 27
replace renyuan = 65764 if idcode == 8


gen menzhen = 544.8 if idcode == 4
replace menzhen = 339.3 if idcode == 7
replace menzhen = 239.5 if idcode == 16
replace menzhen = 255.7 if idcode == 11
replace menzhen = 251 if idcode == 3
replace menzhen = 308 if idcode == 24
replace menzhen = 275.9 if idcode == 5
replace menzhen = 264.9 if idcode == 28
replace menzhen = 378.8 if idcode == 1
replace menzhen = 281.2 if idcode == 14
replace menzhen = 265.3 if idcode == 18
replace menzhen = 238.9 if idcode == 9
replace menzhen = 261.6 if idcode == 22
replace menzhen = 256.5 if idcode == 15
replace menzhen = 253.8 if idcode == 10
replace menzhen = 193.8 if idcode == 17
replace menzhen = 243.6 if idcode == 19
replace menzhen = 290.7 if idcode == 20
replace menzhen = 281.7 if idcode == 12
replace menzhen = 206.2 if idcode == 13
replace menzhen = 320.1 if idcode == 25
replace menzhen = 256.4 if idcode == 6
replace menzhen = 236.2 if idcode == 23
replace menzhen = 214.1 if idcode == 2
replace menzhen = 243.4 if idcode == 26
replace menzhen = 187.8 if idcode == 21
replace menzhen = 217.1 if idcode == 27
replace menzhen = 225.1 if idcode == 8


gen zhuyuan = 22618.9 if idcode == 4
replace zhuyuan = 17147.6 if idcode == 7
replace zhuyuan = 8915.4 if idcode == 16
replace zhuyuan = 9005.3 if idcode == 11
replace zhuyuan = 8528.8 if idcode == 3
replace zhuyuan = 9445.8 if idcode == 24
replace zhuyuan = 9802.3 if idcode == 5
replace zhuyuan = 8771.4 if idcode == 28
replace zhuyuan = 18390.4 if idcode == 1
replace zhuyuan = 11215.6 if idcode == 14
replace zhuyuan = 11516.6 if idcode == 18
replace zhuyuan = 7451.1 if idcode == 9
replace zhuyuan = 9204.1 if idcode == 22
replace zhuyuan = 8165.7 if idcode == 15
replace zhuyuan = 9274.7 if idcode == 10
replace zhuyuan = 8156.5 if idcode == 17
replace zhuyuan = 9088.8 if idcode == 19
replace zhuyuan = 8020.7 if idcode == 20
replace zhuyuan = 11549.3 if idcode == 12
replace zhuyuan = 8652 if idcode == 13
replace zhuyuan = 8145.3 if idcode == 25
replace zhuyuan = 8072.7 if idcode == 6
replace zhuyuan = 5730.7 if idcode == 23
replace zhuyuan = 6423.1 if idcode == 2
replace zhuyuan = 7423.8 if idcode == 26
replace zhuyuan = 5803.5 if idcode == 21
replace zhuyuan = 8621.3 if idcode == 27
replace zhuyuan = 7284.3 if idcode == 8


gen chuangwei = 123626 if idcode == 4
replace chuangwei = 68247 if idcode == 7
replace chuangwei = 421916 if idcode == 16
replace chuangwei = 208305 if idcode == 11
replace chuangwei = 159006 if idcode == 3
replace chuangwei = 314440 if idcode == 24
replace chuangwei = 166994 if idcode == 5
replace chuangwei = 250129 if idcode == 28
replace chuangwei = 139029 if idcode == 1
replace chuangwei = 491512 if idcode == 14
replace chuangwei = 332086 if idcode == 18
replace chuangwei = 328123 if idcode == 9
replace chuangwei = 192473 if idcode == 22
replace chuangwei = 249490 if idcode == 15
replace chuangwei = 608459 if idcode == 10
replace chuangwei = 608519 if idcode == 17
replace chuangwei = 393514 if idcode == 19
replace chuangwei = 482439 if idcode == 20
replace chuangwei = 516929 if idcode == 12
replace chuangwei = 255940 if idcode == 13
replace chuangwei = 220104 if idcode == 25
replace chuangwei = 598898 if idcode == 6
replace chuangwei = 245639 if idcode == 23
replace chuangwei = 291194 if idcode == 2
replace chuangwei = 253711 if idcode == 26
replace chuangwei = 162737 if idcode == 21
replace chuangwei = 39146 if idcode == 27
replace chuangwei = 41005 if idcode == 8


gen lnrenjunweisheng=ln(renjunweisheng)
gen lnpopdensity=ln(popdensity)
gen lnrenyuan=ln(renyuan)
gen lnmenzhen=ln(menzhen)
gen lnzhuyuan=ln(zhuguan)
gen lnchuangwei=ln(chuangwei)



